# Alert Query Planner A2A Consumer

é€™æ˜¯ä¸€å€‹åŸºæ–¼ Google ADK (Agent Development Kit) çš„ Agent-to-Agent (A2A) æ¶ˆè²»è€…ä»£ç†é …ç›®ï¼Œå°ˆé–€ç”¨æ–¼æ¸¬è©¦å’Œæ¶ˆè²» Graylog è­¦ç¤ºåˆ†æåŠŸèƒ½ã€‚

## å°ˆæ¡ˆæ¦‚è¿°

æœ¬é …ç›®å¯¦ç¾äº†ä¸€å€‹æ¶ˆè²»è€…ä»£ç†ï¼Œèƒ½å¤ èˆ‡é ç«¯çš„ Graylog è­¦ç¤ºåˆ†æä»£ç†é€²è¡Œé€šä¿¡ã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- æ¥æ”¶å’Œè™•ç† Graylog è­¦ç¤ºè³‡è¨Š
- å°‡ä»»å‹™å§”æ´¾çµ¦é ç«¯çš„è­¦ç¤ºæŸ¥è©¢è¦åŠƒä»£ç†
- æä¾›æ¸¬è©¦ç’°å¢ƒç”¨æ–¼é©—è­‰ A2A é€šä¿¡åŠŸèƒ½

## å°ˆæ¡ˆçµæ§‹

```
alert-query-planner_A2Aconsumer/
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ agent.py          # ä¸»è¦çš„ä»£ç†å¯¦ç¾
â”œâ”€â”€ requirements.txt      # Python ä¾è³´å¥—ä»¶
â”œâ”€â”€ .gitignore           # Git å¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ .env                 # ç’°å¢ƒè®Šæ•¸é…ç½®
â””â”€â”€ README.md            # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

## åŠŸèƒ½ç‰¹è‰²

### ğŸ¤– A2A ä»£ç†æ¶æ§‹
- **æ¶ˆè²»è€…ä»£ç†**: `test_consumer` - ä¸»è¦çš„æ¸¬è©¦ä»£ç†
- **é ç«¯ä»£ç†**: `alert_query_planner_remote` - é ç«¯ Graylog è­¦ç¤ºåˆ†æä»£ç†

### ğŸ”— é ç«¯ä»£ç†æ•´åˆ
- é€é Agent Card é…ç½®é ç«¯ä»£ç†é€£æ¥
- æ”¯æ´è·¨æœå‹™çš„ä»£ç†é€šä¿¡
- è‡ªå‹•ä»»å‹™å§”æ´¾å’Œçµæœè™•ç†

### ğŸ¯ Graylog è­¦ç¤ºè™•ç†
- å°ˆé–€é‡å° Graylog è­¦ç¤ºè³‡è¨Šé€²è¡Œåˆ†æ
- æ™ºèƒ½æŸ¥è©¢è¦åŠƒå’ŒåŸ·è¡Œ
- æ¸¬è©¦é©—è­‰åŠŸèƒ½

## å®‰è£å’Œè¨­å®š

### 1. ç’°å¢ƒéœ€æ±‚

- Python 3.8+
- Google ADK
- ç¶²è·¯é€£æ¥è‡³é ç«¯ä»£ç†æœå‹™

### 2. å®‰è£ä¾è³´

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
python -m venv .venv

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ (Windows)
.venv\Scripts\activate

# å®‰è£ä¾è³´å¥—ä»¶
pip install -r requirements.txt
```

### 3. ç’°å¢ƒé…ç½®

ç¢ºä¿é ç«¯ä»£ç†æœå‹™æ­£åœ¨é‹è¡Œï¼š
- é ç«¯ä»£ç†æœå‹™åœ°å€: `http://localhost:8001`
- Agent Card ç«¯é»: `http://localhost:8001/.well-known/agent.json`

### 4. é‹è¡Œä»£ç†

```python
from agent.agent import root_agent

# å•Ÿå‹•æ¶ˆè²»è€…ä»£ç†
root_agent.run()
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

1. **å•Ÿå‹•ä»£ç†**:
   ```python
   from agent.agent import root_agent
   root_agent.run()
   ```

2. **ç™¼é€ Graylog è­¦ç¤º**:
   ç•¶ç”¨æˆ¶æä¾› Graylog è­¦ç¤ºè³‡è¨Šæ™‚ï¼Œä»£ç†æœƒè‡ªå‹•å°‡ä»»å‹™å§”æ´¾çµ¦é ç«¯çš„ `alert_query_planner_remote` ä»£ç†é€²è¡Œè™•ç†ã€‚

### ä»£ç†é…ç½®

- **æ¨¡å‹**: Gemini 2.0 Flash
- **åç¨±**: test_consumer
- **åŠŸèƒ½**: æ¸¬è©¦ Graylog è­¦ç¤ºåˆ†æåŠŸèƒ½
- **å­ä»£ç†**: alert_query_planner_remote

## API åƒè€ƒ

### RemoteA2aAgent é…ç½®

```python
alert_planner_agent = RemoteA2aAgent(
    name="alert_query_planner_remote",
    description="é ç«¯çš„Graylogè­¦ç¤ºåˆ†æä»£ç†ç¨‹å¼",
    agent_card="http://localhost:8001/.well-known/agent.json"
)
```

### Agent é…ç½®

```python
root_agent = Agent(
    model="gemini-2.0-flash",
    name="test_consumer",
    instruction="...",
    sub_agents=[alert_planner_agent]
)
```

## é–‹ç™¼æŒ‡å—

### ç¨‹å¼ç¢¼çµæ§‹

- `agent/agent.py`: ä¸»è¦ä»£ç†å¯¦ç¾
- `agent/__init__.py`: æ¨¡çµ„åˆå§‹åŒ–

### æ¸¬è©¦

å°ˆæ¡ˆåŒ…å«æ¸¬è©¦ä»£ç†ï¼Œå¯ç”¨æ–¼é©—è­‰ï¼š
- A2A é€šä¿¡åŠŸèƒ½
- Graylog è­¦ç¤ºè™•ç†æµç¨‹
- é ç«¯ä»£ç†æ•´åˆ

### æ“´å±•åŠŸèƒ½

è¦æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¯ä»¥ï¼š
1. ä¿®æ”¹ä»£ç†æŒ‡ä»¤ (`instruction`)
2. æ·»åŠ æ–°çš„å­ä»£ç†
3. è‡ªå®šç¾©è­¦ç¤ºè™•ç†é‚è¼¯

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **ç„¡æ³•é€£æ¥é ç«¯ä»£ç†**
   - æª¢æŸ¥é ç«¯æœå‹™æ˜¯å¦æ­£åœ¨é‹è¡Œ
   - ç¢ºèªç¶²è·¯é€£æ¥å’Œé˜²ç«ç‰†è¨­å®š
   - é©—è­‰ Agent Card URL æ˜¯å¦æ­£ç¢º

2. **ä¾è³´å¥—ä»¶éŒ¯èª¤**
   - ç¢ºä¿å·²å®‰è£æ‰€æœ‰ requirements.txt ä¸­çš„å¥—ä»¶
   - æª¢æŸ¥ Python ç‰ˆæœ¬ç›¸å®¹æ€§

3. **ä»£ç†é€šä¿¡å¤±æ•—**
   - æª¢æŸ¥ä»£ç†é…ç½®
   - é©—è­‰ Agent Card æ ¼å¼
   - ç¢ºèªé ç«¯ä»£ç†æœå‹™ç‹€æ…‹

## æˆæ¬Š

æœ¬å°ˆæ¡ˆä½¿ç”¨ [LICENSE] æˆæ¬Šã€‚

## è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Request ä¾†æ”¹å–„é€™å€‹å°ˆæ¡ˆã€‚

## è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯çµ¡å°ˆæ¡ˆç¶­è­·è€…ã€‚

---

**æ³¨æ„**: è«‹ç¢ºä¿é ç«¯ä»£ç†æœå‹™åœ¨ä½¿ç”¨å‰å·²æ­£ç¢ºé…ç½®å’Œå•Ÿå‹•ã€‚
